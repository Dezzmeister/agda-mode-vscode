// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var Assert = require("assert");
var State$AgdaModeVscode = require("../../src/State.bs.js");
var Test__Util$AgdaModeVscode = require("./Test__Util.bs.js");

function run(normalization) {
  describe("request to Agda", (function () {
          describe("global", (function () {
                  it("should be responded with the correct answer", (async function () {
                          var ctx = await Test__Util$AgdaModeVscode.AgdaMode.makeAndLoad(undefined, "ComputeNormalForm.agda");
                          var responses = {
                            contents: []
                          };
                          var responseHandler = async function (response) {
                            responses.contents.push(response);
                          };
                          await State$AgdaModeVscode.sendRequest(ctx.state, responseHandler, {
                                TAG: "ComputeNormalFormGlobal",
                                _0: normalization,
                                _1: "Z + S Z",
                                [Symbol.for("name")]: "ComputeNormalFormGlobal"
                              });
                          return Curry._3(Assert.deepEqual, responses.contents, [
                                      {
                                        TAG: "Status",
                                        _0: false,
                                        _1: false,
                                        [Symbol.for("name")]: "Status"
                                      },
                                      {
                                        TAG: "DisplayInfo",
                                        _0: {
                                          TAG: "NormalForm",
                                          _0: "S Z",
                                          [Symbol.for("name")]: "NormalForm"
                                        },
                                        [Symbol.for("name")]: "DisplayInfo"
                                      },
                                      "CompleteHighlightingAndMakePromptReappear"
                                    ], undefined);
                        }));
                  it("should be responded with the correct answer", (async function () {
                          var ctx = await Test__Util$AgdaModeVscode.AgdaMode.makeAndLoad(undefined, "ComputeNormalForm.agda");
                          var responses = {
                            contents: []
                          };
                          var responseHandler = async function (response) {
                            responses.contents.push(response);
                          };
                          await State$AgdaModeVscode.sendRequest(ctx.state, responseHandler, {
                                TAG: "ComputeNormalFormGlobal",
                                _0: normalization,
                                _1: "S Z + S Z",
                                [Symbol.for("name")]: "ComputeNormalFormGlobal"
                              });
                          return Curry._3(Assert.deepEqual, responses.contents, [
                                      {
                                        TAG: "Status",
                                        _0: false,
                                        _1: false,
                                        [Symbol.for("name")]: "Status"
                                      },
                                      {
                                        TAG: "DisplayInfo",
                                        _0: {
                                          TAG: "NormalForm",
                                          _0: "S (S Z)",
                                          [Symbol.for("name")]: "NormalForm"
                                        },
                                        [Symbol.for("name")]: "DisplayInfo"
                                      },
                                      "CompleteHighlightingAndMakePromptReappear"
                                    ], undefined);
                        }));
                }));
        }));
}

describe("agda-mode.compute-normal-form[DefaultCompute]", (function () {
        run("DefaultCompute");
      }));

describe("agda-mode.compute-normal-form[IgnoreAbstract]", (function () {
        run("IgnoreAbstract");
      }));

exports.run = run;
/*  Not a pure module */
