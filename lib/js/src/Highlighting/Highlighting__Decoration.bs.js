// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var VSCode = require("rescript-vscode/lib/js/src/VSCode.bs.js");
var Vscode = require("vscode");
var Js_dict = require("rescript/lib/js/js_dict.js");
var Js_array = require("rescript/lib/js/js_array.js");
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var Editor$AgdaModeVscode = require("../Editor.bs.js");

function toVSCodeDecorations(input, editor) {
  var backgroundColorDict = {};
  var foregroundColorDict = {};
  var addFaceToDict = function (face, range) {
    if (face.TAG === "Background") {
      var color = face._0;
      var ranges = Js_dict.get(backgroundColorDict, color);
      if (ranges !== undefined) {
        Js_array.push(range, ranges);
      } else {
        backgroundColorDict[color] = [range];
      }
      return ;
    }
    var color$1 = face._0;
    var ranges$1 = Js_dict.get(foregroundColorDict, color$1);
    if (ranges$1 !== undefined) {
      Js_array.push(range, ranges$1);
    } else {
      foregroundColorDict[color$1] = [range];
    }
  };
  Belt_Array.forEach(input, (function (param) {
          var range = param[1];
          var match = param[0];
          var theme = VSCode.ColorTheme.kind(Vscode.window.activeColorTheme);
          if (theme === "Dark") {
            return addFaceToDict(match.dark, range);
          } else {
            return addFaceToDict(match.light, range);
          }
        }));
  var backgroundDecorations = Belt_Array.map(Js_dict.entries(backgroundColorDict), (function (param) {
          var ranges = param[1];
          return [
                  Editor$AgdaModeVscode.Decoration.highlightBackgroundWithColor(editor, param[0], ranges),
                  ranges
                ];
        }));
  var foregroundDecorations = Belt_Array.map(Js_dict.entries(foregroundColorDict), (function (param) {
          var ranges = param[1];
          return [
                  Editor$AgdaModeVscode.Decoration.decorateTextWithColor(editor, param[0], ranges),
                  ranges
                ];
        }));
  return Js_array.concat(backgroundDecorations, foregroundDecorations);
}

exports.toVSCodeDecorations = toVSCodeDecorations;
/* VSCode Not a pure module */
